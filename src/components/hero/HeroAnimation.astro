---
import Triangle from "@assets/images/hero/triangle.svg";

import { Image } from "astro:assets";

const shapes = [
  {
    src: "/hero/shape1.svg",
    width: 107,
    height: 137,
    class: "shape shape-1 z-10",
  },
  {
    src: "/hero/shape2.svg",
    width: 162,
    height: 117,
    class: "shape shape-2 z-20",
  },
  {
    src: "/hero/shape3.svg",
    width: 214,
    height: 13,
    class: "shape shape-3 z-30",
  },
  {
    src: "/hero/shape1-shadow.svg",
    width: 126,
    height: 28,
    class: "shape-shadow shadow-1",
  },
  {
    src: "/hero/shape2-shadow.svg",
    width: 168,
    height: 42,
    class: "shape-shadow shadow-2",
  },
  {
    src: "/hero/shape3-shadow.svg",
    width: 199,
    height: 19,
    class: "shape-shadow shadow-3",
  },
];
---

<div
  class="reveal relative hidden h-full flex-1 lg:block dark:invert"
  aria-hidden="true"
>
  {
    shapes.map((shape) => (
      <Image
        src={shape.src}
        class={shape.class}
        width={shape.width}
        height={shape.height}
        alt=""
      />
    ))
  }
  <Triangle
    class="shape absolute right-0 -z-10 text-white blur-lg dark:opacity-30"
  />
</div>

<style>
  :root {
    /* Animation configuration */
    --animation-easing: ease-in-out;

    /* Shape 1 */
    --shape-1-duration: 7.1s;
    --shape-1-rotation: 1deg;
    --shape-1-translate: -10px;
    --shape-1-position-right: 200px;
    --shape-1-position-top: 20px;
    --shadow-1-opacity-max: 0.7;
    --shadow-1-opacity-min: 0.5;
    --shadow-1-scale-max: 0.98;
    --shadow-1-scale-min: 0.95;
    --shadow-1-blur-max: 8px;
    --shadow-1-blur-min: 7px;
    --shadow-1-position-right: 200px;
    --shadow-1-position-top: 290px;

    /* Shape 2 */
    --shape-2-duration: 8.2s;
    --shape-2-rotation: -2deg;
    --shape-2-translate: 15px;
    --shape-2-position-right: 90px;
    --shape-2-position-top: 140px;
    --shadow-2-opacity-max: 0.6;
    --shadow-2-opacity-min: 0.4;
    --shadow-2-scale-max: 0.95;
    --shadow-2-scale-min: 0.92;
    --shadow-2-blur-max: 9px;
    --shadow-2-blur-min: 7px;
    --shadow-2-position-right: 90px;
    --shadow-2-position-top: 320px;

    /* Shape 3 */
    --shape-3-duration: 10.2s;
    --shape-3-rotation-start: -4deg;
    --shape-3-rotation-mid: 2deg;
    --shape-3-translate: -30px;
    --shape-3-position-left: 90px;
    --shape-3-position-top: 240px;
    --shadow-3-opacity-max: 0.5;
    --shadow-3-opacity-min: 0.4;
    --shadow-3-scale-max: 1;
    --shadow-3-scale-min: 0.98;
    --shadow-3-blur-max: 5px;
    --shadow-3-blur-min: 4px;
    --shadow-3-position-left: 90px;
    --shadow-3-position-top: 420px;
  }

  .shape,
  .shape-shadow {
    position: absolute;
    will-change: transform, opacity;
  }

  /* Animation Keyframes - Grouped by animation type */
  @keyframes float-rotate {
    0%,
    100% {
      transform: rotateZ(var(--rotation-start)) translateY(0);
    }
    50% {
      transform: rotateZ(var(--rotation-mid)) translateY(var(--translate-y));
    }
  }

  @keyframes shadow-pulse {
    0%,
    100% {
      opacity: var(--opacity-max);
      transform: scale(var(--scale-max));
      filter: blur(var(--blur-max));
    }
    50% {
      opacity: var(--opacity-min);
      transform: scale(var(--scale-min));
      filter: blur(var(--blur-min));
    }
  }

  /* Shape 1 */
  .shape-1 {
    right: var(--shape-1-position-right);
    top: var(--shape-1-position-top);
    animation: float-rotate var(--shape-1-duration) var(--animation-easing)
      infinite;
    --rotation-start: 0deg;
    --rotation-mid: var(--shape-1-rotation);
    --translate-y: var(--shape-1-translate);
  }

  .shadow-1 {
    right: var(--shadow-1-position-right);
    top: var(--shadow-1-position-top);
    animation: shadow-pulse var(--shape-1-duration) var(--animation-easing)
      infinite;
    --opacity-max: var(--shadow-1-opacity-max);
    --opacity-min: var(--shadow-1-opacity-min);
    --scale-max: var(--shadow-1-scale-max);
    --scale-min: var(--shadow-1-scale-min);
    --blur-max: var(--shadow-1-blur-max);
    --blur-min: var(--shadow-1-blur-min);
  }

  /* Shape 2 */
  .shape-2 {
    right: var(--shape-2-position-right);
    top: var(--shape-2-position-top);
    animation: float-rotate var(--shape-2-duration) var(--animation-easing)
      infinite;
    --rotation-start: 0deg;
    --rotation-mid: var(--shape-2-rotation);
    --translate-y: var(--shape-2-translate);
  }

  .shadow-2 {
    right: var(--shadow-2-position-right);
    top: var(--shadow-2-position-top);
    animation: shadow-pulse var(--shape-2-duration) var(--animation-easing)
      infinite;
    --opacity-max: var(--shadow-2-opacity-min);
    --opacity-min: var(--shadow-2-opacity-max);
    --scale-max: var(--shadow-2-scale-min);
    --scale-min: var(--shadow-2-scale-max);
    --blur-max: var(--shadow-2-blur-min);
    --blur-min: var(--shadow-2-blur-max);
  }

  /* Shape 3 */
  .shape-3 {
    left: var(--shape-3-position-left);
    top: var(--shape-3-position-top);
    animation: float-rotate var(--shape-3-duration) var(--animation-easing)
      infinite;
    --rotation-start: var(--shape-3-rotation-start);
    --rotation-mid: var(--shape-3-rotation-mid);
    --translate-y: var(--shape-3-translate);
  }

  .shadow-3 {
    left: var(--shadow-3-position-left);
    top: var(--shadow-3-position-top);
    animation: shadow-pulse var(--shape-3-duration) var(--animation-easing)
      infinite;
    --opacity-max: var(--shadow-3-opacity-max);
    --opacity-min: var(--shadow-3-opacity-min);
    --scale-max: var(--shadow-3-scale-max);
    --scale-min: var(--shadow-3-scale-min);
    --blur-max: var(--shadow-3-blur-max);
    --blur-min: var(--shadow-3-blur-min);
  }

  @media (prefers-reduced-motion: reduce) {
    .shape,
    .shape-shadow {
      animation: none !important;
    }
  }
</style>
